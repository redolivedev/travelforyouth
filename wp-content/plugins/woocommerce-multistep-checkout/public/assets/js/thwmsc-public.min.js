function get_country_name(country_code){return iso_countries.hasOwnProperty(country_code)?iso_countries[country_code]:country_code}function thwmscJumpToStep(step_number,step){thwmsc_public.jump_to_step(step_number,step)}function thwmscIntialize(step_number,step){thwmsc_public.initialize_thwmsc()}function thwmsc_get_step_review_data(fields,step){return thwmsc_public.get_step_review_data(fields,step)}var thwmsc_public_base=function($,window,document){"use strict";function remove_duplicates(arr){return arr.filter(function(elem,index,self){return index==self.indexOf(elem)})}function padZero(s,len,c){s=""+s;for(var c=c||"0";s.length<len;)s=c+s;return s}function isInt(value){return!isNaN(value)&&parseInt(Number(value))==value&&!isNaN(parseInt(value,10))}function isEmpty(val){return void 0===val||null==val||val.length<=0}function may_parse_date(dateStr){if(DATE_FORMAT_1.test(dateStr)){var date=new Date(dateStr);if(date)return date}return dateStr}function prepare_date(dateStr,format,strict){var date=null;if(!isEmpty(dateStr))try{date=$.datepicker.parseDate(format,dateStr),date.setHours(0,0,0,0)}catch(err){if(!strict){var pattern=dateStr.split(" "),years=null,months=null,days=null;if(pattern.length>0)for(var i=0;i<pattern.length;i++){var x=pattern[i];x=x.toLowerCase(),-1!=x.indexOf("y")?(x=x.replace(/y/gi,""),years=parseInt(x)):-1!=x.indexOf("m")?(x=x.replace(/m/gi,""),months=parseInt(x)):-1!=x.indexOf("d")&&(x=x.replace(/d/gi,""),days=parseInt(x))}isEmpty(years)&&isEmpty(months)&&isEmpty(days)||(date=new Date,date.setHours(0,0,0,0),years&&0!=years&&date.setFullYear(date.getYear()+years),months&&0!=months&&date.setMonth(date.getMonth()+months),days&&0!=days&&date.setDate(date.getDate()+days))}}return date}function compare_dates(field,cvalue){var result=null,value=field.val(),format=field.data("date-format");if(isEmpty(value)||isEmpty(cvalue))return null;var d1=prepare_date(value,format,!0),d2=prepare_date(cvalue,format,!1);if(d1&&d2)try{d1>d2?result=1:d1<d2?result=-1:d1.getTime()===d2.getTime()&&(result=0)}catch(err){result=null}return result}function isSameDate(date1,date2){var day1=date1.getDate(),month1=date1.getMonth()+1,year1=date1.getFullYear(),day2=date2.getDate(),month2=date2.getMonth()+1,year2=date2.getFullYear(),matchYear=!(!isInt(day1)||!isInt(day2)||day1!=day2),matchMonth=!(!isInt(month1)||!isInt(month2)||month1!=month2),matchDay=!(!isInt(year1)||!isInt(year2)||year1!=year2);return matchYear&&matchMonth&&matchDay}function is_date_eq(field,cvalue){var result=compare_dates(field,cvalue);return null!=result&&0===result}function is_date_gt(field,cvalue){var result=compare_dates(field,cvalue);return null!=result&&1===result}function is_date_lt(field,cvalue){var result=compare_dates(field,cvalue);return null!=result&&-1===result}function is_day_eq(field,cvalue){var result=!1;if(!isEmpty(cvalue)){var value=field.val(),format=field.data("date-format"),date=prepare_date(value,format,!0);if(date){var day=date.getDay();if(isInt(cvalue))cvalue=parseInt(cvalue),result=null!=day&&day===cvalue;else if(cvalue=cvalue.toLowerCase(),$.inArray(cvalue,weekDays)>=0){var daystring=weekDays[day];result=null!=daystring&&daystring===cvalue}}}return result}function setup_enhanced_select(form,class_selector,data){form.find("select."+class_selector).each(function(){var ms=$(this);ms.select2({minimumResultsForSearch:10,allowClear:!0,placeholder:ms.data("placeholder"),maximumSelectionLength:ms.data("maxselections"),language:data.language}).addClass("enhanced")})}function calculate_minutes_from_hr_min(_hour,_min){var minutes=null;return isInt(_hour)&&isInt(_min)&&(minutes=60*_hour+_min),minutes}function get_minutes_from_time_24hr(time){var minutes=null,timeArr=time.split(":");if(2==timeArr.length){minutes=calculate_minutes_from_hr_min(parseInt(timeArr[0]),parseInt(timeArr[1]))}return minutes}function no_specific_days(date,disableDays){var day=date.getDay(),daystring=weekDays[day];return[-1==disableDays.indexOf(daystring),""]}function no_specific_dates(date,datestring){var day=date.getDate(),month=date.getMonth()+1,year=date.getFullYear(),dateArr=datestring.split("-");if(3==dateArr.length){var matchYear=!isInt(dateArr[0])||dateArr[0]==year,matchMonth=!isInt(dateArr[1])||dateArr[1]==month,matchDay=!isInt(dateArr[2])||dateArr[2]==day;return isInt(dateArr[0])||isInt(dateArr[1])||isInt(dateArr[2])?[!(matchYear&&matchMonth&&matchDay),""]:[!0,""]}var _now=new Date;if(isSameDate(date,_now)){var _hour=_now.getHours(),_min=_now.getMinutes(),op="eq";-1!=datestring.indexOf("+")?(op="gt",datestring=datestring.replace("+","")):-1!=datestring.indexOf("-")&&(op="lt",datestring=datestring.replace("-",""));var _minutes=calculate_minutes_from_hr_min(_hour,_min),minutes=get_minutes_from_time_24hr(datestring);if(isInt(minutes)&&isInt(_minutes)&&("eq"===op&&_minutes==minutes||"gt"===op&&_minutes>minutes||"lt"===op&&_minutes<minutes))return[!1,""]}return[!0,""]}function disable_dates(date){var disabledDays=$(this).data("disabled-days");if(disabledDays&&disabledDays.length>0){var daysArr=disabledDays.split(","),disabledDay=no_specific_days(date,daysArr);if(!disabledDay[0])return disabledDay}var disabledDates=$(this).data("disabled-dates");if(disabledDates&&disabledDates.length>0){var datesArr=disabledDates.split(",");if(datesArr.length>0)for(var i=0;i<datesArr.length;i++){var disabledDate=no_specific_dates(date,datesArr[i].trim());if(!disabledDate[0])return disabledDate}}return[!0,""]}function setup_date_picker(form,class_selector,data){form.find("."+class_selector).each(function(){var dateFormat=$(this).data("date-format"),defaultDate=$(this).data("default-date"),maxDate=$(this).data("max-date"),minDate=$(this).data("min-date"),yearRange=$(this).data("year-range"),numberOfMonths=$(this).data("number-months");maxDate=may_parse_date(maxDate),minDate=may_parse_date(minDate),dateFormat=""==dateFormat?"dd/mm/yy":dateFormat,defaultDate=""==defaultDate?null:defaultDate,maxDate=""==maxDate?null:maxDate,minDate=""==minDate?null:minDate,yearRange=""==yearRange?"-100:+1":yearRange,numberOfMonths=numberOfMonths>0?numberOfMonths:1;var value=$(this).val();value.trim()&&(defaultDate=value),$(this).datepicker({defaultDate:defaultDate,maxDate:maxDate,minDate:minDate,yearRange:yearRange,numberOfMonths:numberOfMonths,showButtonPanel:!0,changeMonth:!0,changeYear:!0}),$(this).datepicker("option",$.datepicker.regional[data.language]),$(this).datepicker("option","dateFormat",dateFormat),$(this).datepicker("option","beforeShowDay",disable_dates),$(this).datepicker("setDate",defaultDate),data.readonly_date_field&&$(this).prop("readonly",!0)})}function split_hour_min(hourMinStr){var hours=0,minutes=0;if(hourMinStr&&("string"==typeof hourMinStr||hourMinStr instanceof String)){var _hourMin=hourMinStr.split(" ");if(_hourMin.length>0)for(var i=0;i<_hourMin.length;i++){var x=_hourMin[i];x=x.toLowerCase(),-1!=x.indexOf("h")?(x=x.replace(/h/gi,""),hours=parseInt(x)):-1!=x.indexOf("m")&&(x=x.replace(/m/gi,""),minutes=parseInt(x))}hours=hours||0,minutes=minutes||0,minutes>=60&&(hours+=1,minutes=0)}return[hours,minutes]}function get_start_hr_min(startTime){var timeInfo={};if(startTime){var startTimeArr=split_hour_min(startTime);if(startTimeArr.length>1){var currTime=new Date,currHour=currTime.getHours(),currMin=currTime.getMinutes(),_startHour=startTimeArr[0],startDays=parseInt(_startHour/24),startDate=new Date;startDate.addDays(startDays).setHours(0,0,0,0);var startHour=_startHour%24,startMin=startTimeArr[1];startHour=currHour+startHour,startMin=currMin+startMin,startMin>=60?(startHour++,startMin-=60):startMin<0&&(startHour--,startMin=60+startMin),timeInfo.startDate=startDate,timeInfo.startDays=startDays,timeInfo.startHour=startHour,timeInfo.startMin=startMin,timeInfo.hour=startTimeArr[0],timeInfo.min=startTimeArr[1]}}return timeInfo}function get_time_suffix(time){time=time.toLowerCase();var suffix="";return-1!=time.indexOf("am")?suffix="am":-1!=time.indexOf("pm")&&(suffix="pm"),suffix}function split_time_string(time,ampm){time=time.replace(/pm/gi,""),time=time.replace(/am/gi,"");var timeArr=time.split(":"),hours=parseInt(timeArr[0]),minutes=parseInt(timeArr[1]);return"pm"==ampm&&hours<12?hours+=12:"am"==ampm&&12==hours&&(hours-=12),[hours,minutes]}function split_time_string_12hr(time){return split_time_string(time,get_time_suffix(time))}function get_disabled_time_ranges(minTime,maxTime,startTime){var minHour=minTime[0],minMin=minTime[1],currTime=(maxTime[0],maxTime[1],new Date);currTime.getHours(),currTime.getMinutes();currTime.setSeconds(0,0);var startHour=startTime.startHour,startMin=startTime.startMin;return(new Date).setHours(startHour,startMin,0,0),minHour=padZero(minHour,2),minMin=padZero(minMin,2),startHour=padZero(startHour,2),startMin=padZero(startMin,2),[[minHour+":"+minMin,startHour+":"+startMin]]}function disable_all_time_slots(tp,minTime,maxTime){var suffixMaxTime=get_time_suffix(maxTime),maxTimeArr=split_time_string(maxTime,suffixMaxTime),maxHour=maxTimeArr[0],maxMin=maxTimeArr[1];maxHour=padZero(maxHour,2),maxMin=padZero(parseInt(maxMin)+1,2);var newMaxTime=maxHour+":"+maxMin;tp.timepicker("option","disableTimeRanges",[[minTime,newMaxTime]])}function adjust_time_slots_based_on_date_selected(dp,tp){var dpDate=null;if(dp){var df=dp.data("date-format");dpDate=prepare_date(dp.val(),df,!0)}var minTime=tp.data("min-time"),maxTime=tp.data("max-time"),startTime=tp.data("start-time"),startTimeArr=get_start_hr_min(startTime);if(startTimeArr){var startDate=startTimeArr.startDate;if(null!=dp&&dpDate<startDate)disable_all_time_slots(tp,minTime,maxTime);else if(null!=dp&&dpDate>startDate)tp.timepicker("option","disableTimeRanges",[]);else{var minTimeArr=split_time_string_12hr(minTime),minHour=minTimeArr[0],minMin=minTimeArr[1],maxTimeArr=split_time_string_12hr(maxTime),maxHour=maxTimeArr[0],maxMin=maxTimeArr[1],startHour=startTimeArr.startHour,startMin=startTimeArr.startMin;if(startHour>maxHour||startHour==maxHour&&startMin>maxMin)disable_all_time_slots(tp,minTime,maxTime);else if(startHour<minHour||startHour==minHour&&startMin<minMin)tp.timepicker("option","disableTimeRanges",[]);else{var disabledTimeRanges=get_disabled_time_ranges(minTimeArr,maxTimeArr,startTimeArr);tp.timepicker("option","disableTimeRanges",disabledTimeRanges)}}}}function setup_time_picker(form,class_selector,data){form.find("."+class_selector).each(function(){var minTime=$(this).data("min-time"),maxTime=$(this).data("max-time"),step=$(this).data("step"),format=$(this).data("format"),linkedDate=($(this).data("start-time"),$(this).data("linked-date"));minTime=minTime||"12:00am",maxTime=maxTime||"11:30pm",step=step||"30",format=format||"h:i A";var args={minTime:minTime,maxTime:maxTime,step:step,timeFormat:format,forceRoundTime:!0,disableTextInput:!0,lang:data.lang};if($(this).timepicker(args),linkedDate){var dp=$("#"+linkedDate);dp.length&&adjust_time_slots_based_on_date_selected(dp,$(this))}else adjust_time_slots_based_on_date_selected(null,$(this))})}function display_char_count(elm,isCount){var fid=elm.prop("id"),len=elm.val().length,displayElm=$("#"+fid+"-char-count");if(isCount)displayElm.text("("+len+" characters)");else{var maxLen=elm.prop("maxlength"),left=maxLen-len;displayElm.text("("+left+" characters left)"),rem<0&&displayElm.css("color","red")}}function set_field_value_by_elm(elm,type,value){switch(type){case"radio":elm.val([value]);break;case"checkbox":1==elm.data("multiple")?(value=value||[],elm.val(value)):elm.val([value]);break;case"select":elm.prop("multiple")?elm.val(value):elm.val([value]);break;default:elm.val(value)}}function get_field_value(type,elm,name){var value="";switch(type){case"radio":value=$("input[type=radio][name='"+name+"']:checked").val(),value=value||"";break;case"checkbox":if(1==elm.data("multiple")){var valueArr=[];$("input[type=checkbox][name='"+name+"']:checked").each(function(){valueArr.push($(this).val())}),value=valueArr,$.isEmptyObject(value)&&(value="")}else value=$("input[type=checkbox][name='"+name+"']:checked").val(),value=value||"";break;case"select":case"multiselect":default:value=elm.val()}return value}var DATE_FORMAT_1=/^(19|20)\d{2}-(0?[1-9]|1[0-2])-(0?[1-9]|1\d|2\d|3[01])$/,weekDays=["sun","mon","tue","wed","thu","fri","sat"];return $.fn.getType=function(){try{return"INPUT"==this[0].tagName?this[0].type.toLowerCase():this[0].tagName.toLowerCase()}catch(err){return"E001"}},{setup_enhanced_select:setup_enhanced_select,setup_date_picker:setup_date_picker,setup_time_picker:setup_time_picker,display_char_count:display_char_count,remove_duplicates:remove_duplicates,set_field_value_by_elm:set_field_value_by_elm,get_field_value:get_field_value,is_date_eq:is_date_eq,is_date_gt:is_date_gt,is_date_lt:is_date_lt,is_day_eq:is_day_eq}}(window.jQuery,window,document),iso_countries={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},thwmsc_public=function($){"use strict";function initialize_thwmsc(){if(tabs_wrapper.length){var first_step_tab=tabs.find("li.thwmsc-tab a.first");first_step=first_step_tab.data("step"),last_step=tabs.find("li.thwmsc-tab a.last").data("step"),jump_to_step(first_step,first_step_tab),tabs.find("li.thwmsc-tab a").click(function(){var step_number=$(this).data("step");(step_number<active_step||thwmsc_public_var.enable_step_forward)&&(jump_to_step(step_number,$(this)),scroll_to_top())}),accordion_label.click(function(){var step_number=$(this).data("step");(step_number<active_step||thwmsc_public_var.enable_step_forward)&&(jump_to_step(step_number,$(this)),scroll_to_top())}),button_prev.click(function(){var step_number=active_step-1;step_number>=first_step&&(jump_to_step(step_number,!1),scroll_to_top())}),accordion_btn_prev.click(function(){var step_number=active_step-1;step_number>=first_step&&(jump_to_step(step_number,!1),scroll_to_top())}),button_next.click(function(){var step_number=active_step+1;step_number<=last_step&&!disable_ajax_validation?validate_checkout_step(active_step,step_number):(jump_to_step(step_number,!1),scroll_to_top())}),accordion_btn_next.click(function(){var step_number=active_step+1;step_number<=last_step&&!disable_ajax_validation?validate_checkout_step(active_step,step_number):(jump_to_step(step_number,!1),scroll_to_top())}),$(document).on("checkout_error",function(){var error_woocommerce=$(".woocommerce-NoticeGroup.woocommerce-NoticeGroup-checkout").html();$(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),tab_panels.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+error_woocommerce+"</div>")}),show_login_form&&setTimeout(function(){$(".woocommerce-form-login.login").show()},100),show_coupon_form&&setTimeout(function(){$(".checkout_coupon").show()},300),enable_cart_step&&($(document.body).on("updated_cart_totals",function(){fill_coupon_value_to_all_coupon_field()}),$(document.body).on("applied_coupon_in_checkout",function(){clear_coupon_value()}),fill_coupon_value_to_all_coupon_field()),display_cart_step_notices(),display_step_review(),$(".thwmsc-layout-time-line")[0]&&add_timeline_height_mobile()}}function fill_coupon_value_to_all_coupon_field(){clear_coupon_value(),$('.woocommerce-checkout.woocommerce-page input[name="coupon_code"]').on("change",function(){var coupon_code=$(this).val();$('.woocommerce-checkout.woocommerce-page input[name="coupon_code"]').val(coupon_code)})}function clear_coupon_value(){$('.woocommerce-checkout.woocommerce-page input[name="coupon_code"]').val("")}function jump_to_step(step_number,step){step||(step=tabs.find("#step-"+step_number)),tabs.find("li a").removeClass("active"),tabs.find("li").removeClass("tab-active");var active_tab_panel=tab_panels.find("#thwmsc-tab-panel-"+step_number);step.hasClass("active")||(step.removeClass("thwmsc-finished-step"),step.addClass("active"),step.parent().addClass("tab-active")),tab_panels.find("div.thwmsc-tab-panel").not("#thwmsc-tab-panel-"+step_number).hide(),active_tab_panel.show();var step_label=tab_panels.find("#thwmsc-accordion-label-"+step_number);tab_panels.find(".thwmsc-accordion-label").removeClass("active");var active_accodion=tab_panels.find("#thwmsc-tab-content-"+step_number);if(step_label.hasClass("active")||(step_label.removeClass("thwmsc-finished-step"),step_label.addClass("active")),accordion_open||tab_panels.find("div.thwmsc-tab-content").not("#thwmsc-tab-content-"+step_number).hide(),active_accodion.show(),!thwmsc_public_var.enable_step_forward){var i=step_number-1;if(tabs_wrapper.find("a").removeClass("thwmsc-completed"),tabs_wrapper.find("a.thwmsc-accordion-label").removeClass("thwmsc-completed"),i>-1)for(i;i>=0;i--)$("#step-"+i).addClass("thwmsc-completed"),$("#thwmsc-accordion-label-"+i).addClass("thwmsc-completed")}active_step=step_number,re_initialize_support_plugins(step_number),prepare_action_buttons(),$(document.body).trigger("step_jumped",[step_number])}function re_initialize_support_plugins(step_number){$("#thwmsc-tab-panel-"+step_number+" select.thwcfe-enhanced-select, .country_select, .state_select").select2(),thwmsc_public_base.setup_enhanced_select($("#thwmsc-tab-panel-"+step_number),"thwcfe-enhanced-multi-select",thwmsc_public_var)}function prepare_action_buttons(){button_prev.prop("disabled",!1),button_next.prop("disabled",!1),button_next.removeClass("next-last"),button_prev.removeClass("prev-first"),accordion_btn_prev.prop("disabled",!1),accordion_btn_next.prop("disabled",!1),accordion_btn_next.removeClass("next-last"),accordion_btn_prev.removeClass("prev-first"),active_step==first_step&&(button_prev.prop("disabled",!0),button_prev.addClass("prev-first"),accordion_btn_prev.prop("disabled",!0),accordion_btn_prev.addClass("prev-first")),active_step==last_step&&(button_next.prop("disabled",!0),button_next.addClass("next-last"),accordion_btn_next.prop("disabled",!0),accordion_btn_next.addClass("next-last"))}function prepare_validation_request(active_step,error_display_mode){var posted={},active_section=$("#thwmsc-tab-panel-"+active_step);if(active_section){var all_inputs=active_section.find(":input").not(".thwcfe-disabled-field");posted.thwcfe_disabled_sections=$("#thwcfe_disabled_sections").val(),posted.active_step_id="#thwmsc-tab-panel-"+active_step,$.each(all_inputs,function(field){var type=$(this).getType(),name=$(this).attr("name"),value=thwmsc_public_base.get_field_value(type,$(this),name);(1==$(this).data("multiple")&&"checkbox"==type||$(this).prop("multiple")&&"select"==type)&&(name=name.replace("[]","")),posted[name]=value})}var request_data={};return request_data.action="thwmsc_step_validation",request_data.fieldset_key=active_step,request_data.error_display_mode=error_display_mode,request_data.posted=posted,request_data}function validate_checkout_step(active_step,next_step){"ajax"===thwmsc_public_var.validation_type?validate_checkout_step_ajax(active_step,next_step):validate_checkout_step_js(active_step,next_step)}function validate_checkout_step_ajax(active_step,next_step){var input_data=prepare_validation_request(active_step,"global");xhr_request&&4!=xhr_request.readyState&&xhr_request.abort(),button_prev.prop("disabled",!0),button_next.prop("disabled",!0),xhr_request=$.post(thwmsc_public_var.ajax_url,input_data,function(response){handle_validation_response(response,"global",input_data)&&(tabs.find("#step-"+active_step).addClass("thwmsc-finished-step"),jump_to_step(next_step,!1),scroll_to_top())}).always(function(){prepare_action_buttons()})}function validate_checkout_step_js(active_step,next_step){jump_to_step(next_step,!1),scroll_to_top()}function handle_validation_response(response,error_display_mode,input_data){var valid=!0;if(clear_validation_error(),"failure"===response.result){display_error(response,error_display_mode);hilite_invalid_fields(response,input_data.posted),valid=!1}var response_custom=custom_validation_response(input_data);return"failure"===response_custom.result&&(display_error(response_custom,error_display_mode),valid=!1),valid||$("html, body").animate({scrollTop:$("#thwmsc_wrapper .woocommerce-error").offset().top-100},1e3),valid}function hilite_invalid_fields(response,posted_data){$.each(posted_data,function(field_name,value){$("#"+field_name).trigger("validate").blur()})}function custom_validation_response(input_data){var posted=input_data.posted,result=$(document.body).triggerHandler("custom_step_validation",posted),response=[];return void 0!==result&&result.length>0?(response.result="failure",response.messages=result):(response.result="success",response.messages=""),response.type="custom",response}function display_error(error,error_display_mode){"inline"===error_display_mode?display_inline_error(error.messages,error.type):display_global_error(error.messages,error.type)}function display_inline_error(error,type){tab_panels.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+error+"</div>")}function display_global_error(error,type){var error_div=$(".woocommerce-error");if(void 0!=type&&"custom"===type){error=error.split("|");var error_html="";error.forEach(function(element){error_html=error_html+"<li>"+element+"</li>"})}error_div.length>0?error_div.append(error_html):"custom"===type?(error='<ul class="woocommerce-error" role="alert">'+error_html+"</ul>",tab_panels.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+error+"</div>")):tab_panels.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+error+"</div>")}function clear_validation_error(){$(".thwmsc-tab-panel-wrapper .woocommerce-NoticeGroup-checkout, .thwmsc-tab-panel-wrapper .woocommerce-error, .thwmsc-tab-panel-wrapper .woocommerce-message, .woocommerce .woocommerce-error").remove()}function scroll_to_top(){$("html, body").animate({scrollTop:tabs_wrapper.offset().top-100},800)}function display_cart_step_notices(){enable_cart_step&&$(document.body).on("updated_wc_div",function(){var coupon_html='<div class="woocommerce-info">Have a coupon? <a href="#" class="showcoupon">Click here to enter your code</a></div>',step_coupon_toggle=$(".thwmsc-tab-content .woocommerce-form-coupon-toggle");step_coupon_toggle.length>0?(step_coupon_toggle.html(coupon_html),$(".woocommerce-notices-wrapper .woocommerce-info").remove(),replace_woocommerce_notice_to_wmsc_tab()):$(".woocommerce-form-coupon-toggle").html(coupon_html)}),$(document.body).on("applied_coupon applied_coupon_in_checkout",function(){replace_woocommerce_notice_to_wmsc_tab()}),$(document.body).on("removed_coupon removed_coupon_in_checkout",function(){replace_woocommerce_notice_to_wmsc_tab()})}function replace_woocommerce_notice_to_wmsc_tab(){var cart_step=$(".thwmsc-tab-panel.cart"),coupon_step=$(".thwmsc-tab-panel.coupon");if(cart_step.length>0||coupon_step.length>0){var error_woocommerce=$(".woocommerce-notices-wrapper").html();if(!error_woocommerce&&(error_woocommerce=$(".woocommerce-message, .woocommerce-error"),!error_woocommerce.length>0))return;var notices=$(".thwmsc-notices");!notices.length>0&&(tab_panels.prepend('<div class="thwmsc-notices"></div>'),notices=tab_panels.find(".thwmsc-notices")),notices.html(error_woocommerce),$(".woocommerce-notices-wrapper").html(""),$(document.body).trigger("thwmsc_notice_displayed")}}function get_checkout_filled_data(steps_for_review){var checkout_data={};return $.each(steps_for_review,function(index,step){var step_tabs=$('.thwmsc-tab a[data-step_name="'+step+'"]');if(step_tabs){var step_number=step_tabs.data("step"),step_content=$("#thwmsc-tab-panel-"+step_number);if(step_content){var all_inputs=step_content.find(":input").not(".thwcfe-disabled-field").not(".thwcfe-disabled-section :input"),field_value="",step_data={};$.each(all_inputs,function(key,field){var type=$(this).getType(),name=$(this).attr("name"),fval=thwmsc_public_base.get_field_value(type,$(this),name);"billing"==step&&"ship_to_different_address"==name&&1==fval&&(step_data.ship_head='</address><h3 class="thwmsc-review-data-title thwmsc-review-data-shipping-title">'+review_shipping_fields+'</h3><address class="thwmsc-review-fields">'),"hidden"!==type&&((1==$(this).data("multiple")&&"checkbox"==type||$(this).prop("multiple")&&"select"==type)&&(name=name.replace("[]","")),fval&&(step_data[name]=fval,field_value+=name+" : "+fval+"<br>"))}),step_data&&(checkout_data[step]=step_data)}}}),checkout_data}function remove_shipping_if_billing_shipping_together(steps_for_review){return billing_shipping_together&&$.inArray("shipping",steps_for_review)>-1&&(steps_for_review=$.grep(steps_for_review,function(value){return"shipping"!=value})),steps_for_review}function get_states_of_given_country(country){var states_json=wc_country_select_params.countries.replace(/&quot;/g,'"'),states=$.parseJSON(states_json);return states=states[country]}function get_state_name_from_state_code(states,state_code){return states.hasOwnProperty(state_code)?states[state_code]:state_code}function get_state_name(state_code,country){var states=get_states_of_given_country(country);if(states){return get_state_name_from_state_code(states,state_code)}return state_code}function get_fields_under_shipping_div(){var shipping_fields=$(".woocommerce-shipping-fields").find(":input").not(".thwcfe-disabled-field"),shipping=[];return $.each(shipping_fields,function(key,field){var name=$(this).attr("name");-1==$.inArray(name,shipping)&&shipping.push(name)}),shipping}function get_step_review_data(fields,step){var step_data="",shipping_fields=[];return("shipping"==step||"billing"==step&&billing_shipping_together)&&!fields.ship_to_different_address&&(shipping_fields=get_fields_under_shipping_div()),$.each(fields,function(key,field){if("ship_to_different_address"!=key&&!(("shipping"==step||"billing"==step&&billing_shipping_together)&&!fields.ship_to_different_address&&$.inArray(key,shipping_fields)>-1||$.inArray(key,exclude_checkout_fields)>-1)){if("billing_country"!=key&&"shipping_country"!=key||!field||(field=get_country_name(field)),("billing_state"==key||"shipping_state"==key)&&field){var country_name=step+"_country";billing_in_shipping&&"shipping"==step&&!fields.ship_to_different_address&&(country_name="billing_country"),field=get_state_name(field,fields[country_name])}step_data+=field+"<br>"}}),step_data}function display_step_review(){$(document.body).on("step_jumped",function(event,step_number){if($("#step-"+step_number).data("step_name")==placeholder_step){var steps_for_review=jQuery.parseJSON(json_steps_for_review);steps_for_review=remove_shipping_if_billing_shipping_together(steps_for_review);var checkout_data=get_checkout_filled_data(steps_for_review);checkout_data&&$(document.body).trigger("display_review_data",[checkout_data])}}),$(document.body).on("display_review_data",function(event,checkout_data){var review_wrapper=$("#thwmsc_review_data_wrap");review_wrapper.html(""),$.each(checkout_data,function(step,fields){if(billing_in_shipping&&"shipping"==step&&!fields.ship_to_different_address)var step_data=get_step_review_data(checkout_data.billing,step);else var step_data=get_step_review_data(fields,step);if(step_data){step_data='<address class="thwmsc-review-fields">'+step_data+"</address>";var step_review_wrapper=$("#thwmsc_"+step+"_review_data"),step_tabs=$('.thwmsc-tab a[data-step_name="'+step+'"]');if(step_tabs){step_data='<h3 class="thwmsc-review-data-title"> Review '+step_tabs.data("step_title")+"</h3>"+step_data}step_review_wrapper.length>0?step_review_wrapper.html(step_data):review_wrapper.append('<div id="thwmsc_'+step+'_review_data">'+step_data+"</div>")}}),$(document.body).trigger("review_data_displayed",[checkout_data])})}function add_timeline_height_mobile(){var $this;$(window).width()<560&&$("span.thwmsc-tab-label").each(function(){$this=$(this);var height=$this.height()+30;$(this).parent().css("height",height)})}var xhr_request=null,tabs_wrapper=($("form.checkout"),
$("#thwmsc_wrapper")),tabs=$("#thwmsc-tabs"),tab_panels=$("#thwmsc-tab-panels"),accordion_label=$(".thwmsc-accordion-label"),first_step=0,last_step=0,button_prev=$("#action-prev"),button_next=$("#action-next"),accordion_btn_prev=$(".action-accordion-prev"),accordion_btn_next=$(".action-accordion-next"),accordion_open=thwmsc_public_var.show_passed_accordion,show_login_form=thwmsc_public_var.show_login_direclty,show_coupon_form=thwmsc_public_var.show_coupon_direclty,disable_ajax_validation=thwmsc_public_var.disable_ajax_validation,json_steps_for_review=thwmsc_public_var.steps_for_review,placeholder_step=thwmsc_public_var.placeholder_step,billing_in_shipping=thwmsc_public_var.billing_in_shipping,enable_cart_step=thwmsc_public_var.enable_cart_step,exclude_checkout_fields=thwmsc_public_var.exclude_checkout_fields,billing_shipping_together=thwmsc_public_var.billing_shipping_together,review_shipping_fields=thwmsc_public_var.review_shipping_fields,active_step=1;return initialize_thwmsc(),{jump_to_step:jump_to_step,initialize_thwmsc:initialize_thwmsc,get_step_review_data:get_step_review_data}}(jQuery);