jQuery(function(a){if(a("body").hasClass("red-olive_page_ro-wc-settings-admin")){a(".tab").hide(),a('.tab[data-tab="1"]').show(),a(".nav-tab").click(function(i){i.preventDefault(),a(".nav-tab").removeClass("nav-tab-active"),a(this).addClass("nav-tab-active"),a(".tab").slideUp(),a('.tab[data-tab="'+a(this).data("tab")+'"]').slideDown()}),a("#abandoned_cart_test_email").val(""),a("#ro_send_test_email").click(function(){a("#abandoned_cart_test_email").val()&&(data={action:"ro_send_test_rac_email",test_email:a("#abandoned_cart_test_email").val()},a.post(ajaxurl,data,function(i){i.success?a("#abandoned_cart_test_success").show():(a("#abandoned_cart_test_failed").show(),console.log(i.data)),a("#abandoned_cart_test_email").val("")}))});var i=a("#abandoned_cart_mailchimp_list").val(),t=a("#abandoned_cart_mailchimp_key").val();t&&a("#abandoned_cart_mailchimp_list").replaceWith('<div id="abandoned_cart_mailchimp_list"><img src="'+ro_wc_localized.pluginUrl+'assets/img/giphy.gif" alt="loading" height="30" width="30" /></div>'),t&&a.post(ajaxurl,{action:"ro_get_lists",api_key:t},function(t){t.success?(a("#abandoned_cart_mailchimp_list").replaceWith('<select name="ro_wc_options[abandoned_cart_mailchimp_list]" id="abandoned_cart_mailchimp_list"></select>'),a.each(t.data.lists,function(i,t){a("#abandoned_cart_mailchimp_list").append(a("<option></option>").attr("value",t.id).text(t.name))}),a("#abandoned_cart_mailchimp_list").val(i)):alert("Your API key is not working")});var e=a("#add_email_to_mailchimp_list_id").val(),l=a("#add_email_to_mailchimp_api_key").val();l&&a("#add_email_to_mailchimp_list_id").replaceWith('<div id="add_email_to_mailchimp_list_id"><img src="'+ro_wc_localized.pluginUrl+'assets/img/giphy.gif" alt="loading" height="30" width="30" /></div>'),l&&a.post(ajaxurl,{action:"ro_get_lists",api_key:l},function(i){i.success?(a("#add_email_to_mailchimp_list_id").replaceWith('<select name="ro_wc_options[add_email_to_mailchimp_list_id]" id="add_email_to_mailchimp_list_id"></select>'),a.each(i.data.lists,function(i,t){a("#add_email_to_mailchimp_list_id").append(a("<option></option>").attr("value",t.id).text(t.name))}),a("#add_email_to_mailchimp_list_id").val(e)):alert("Your API key is not working")})}a("#mailchimp-config").click(function(){a("#mailchimp-config").prop("disabled",!0),a("#mailchimp-config").text("Configuring...");var i=a("#abandoned_cart_mailchimp_list").val(),t=a("#abandoned_cart_mailchimp_key").val();a.post(ajaxurl,{action:"ro_add_mailchimp_merge_fields",mailchimp_list:i,api_key:t},function(i){i.success?(a("#mailchimp-config").text("Correctly Configured"),a("#mailchimp-config").prop("disabled",!0),a("#abandoned_cart_mailchimp_config").val("true")):(alert("Your API key is not working or no List ID was selected"),a("#mailchimp-config").text("Configure MailChimp List"),a("#mailchimp-config").prop("disabled",!1),a("#abandoned_cart_mailchimp_config").val("false"),console.log(i))})}),a(".form-table").on("change","#abandoned_cart_mailchimp_list",function(){a("#mailchimp-config").prop("disabled",!0),a("#mailchimp-config").html("Checking...");var i=a("#abandoned_cart_mailchimp_list").val(),t=a("#abandoned_cart_mailchimp_key").val();a.post(ajaxurl,{action:"ro_check_mailchimp_merge_fields",mailchimp_list:i,api_key:t},function(i){i.success?(console.log(i),i.data.emailhash?(a("#mailchimp-config").text("Correctly Configured"),a("#mailchimp-config").prop("disabled",!0),a("#abandoned_cart_mailchimp_config").val("true")):(a("#mailchimp-config").text("Configure MailChimp List"),a("#mailchimp-config").prop("disabled",!1),a("#abandoned_cart_mailchimp_config").val("false"))):(alert("Your API key is not working or no List ID was selected"),a("#mailchimp-config").text("Configure MailChimp List"),a("#mailchimp-config").prop("disabled",!1),a("#abandoned_cart_mailchimp_config").val("false"),console.log(i))})}),a("#billing_postcode").on("blur",function(){a("body").trigger("update_checkout")}),a("#shipping_postcode").on("blur",function(){a("body").trigger("update_checkout")}),a(".js-ro-wc-activate").click(function(i){var t=a(this);if(!t.hasClass("saved")){i.preventDefault();var e={action:"ro_wc_set_license_key",license_key:a("#wc_license_key").val()};a.post(ajaxurl,e,function(a){t.addClass("saved"),t.click()})}})});