jQuery(function($){function e(e,r){var o=$("input#ro_redirect_file_import").val().split(".").pop().toLowerCase();if(-1==$.inArray(o,["csv"]))return alert("CSV file required"),!1;if(void 0!=e.target.files){var c=new FileReader;c.onload=function(e){var o=e.target.result.split("\n"),c=[],s=o[0].split(",");$.each(o,function(e,i){for(var r=o[e].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/),t="",a={},n=0;n<r.length;n++)a[s[n]]=r[n].replace(/"|\r|\r\n|\n/g,"");c.push(a)}),stringify=JSON.stringify(c),i(stringify,r)},c.readAsText(e.target.files.item(0))}}function i(e,i){$("#import_processing").show();var r={action:"ro_import_redirects_csv",csv_data:e,skip_check:i};$.post(ajaxurl,r,function(e){e.success?($("#import_processing").hide(),$("#import_success").show(),location.reload()):($("#import_processing").hide(),$("#import_failure").show(),console.log(e.data))})}function r(e){var i=e.context.name;e.closest(".acf-fields").find(".force_redirect_processing").show();var r={action:"ro_force_redirect",redirect_data:i};$.post(ajaxurl,r,function(i){i.success?(e.closest(".acf-fields").find(".force_redirect_processing").hide(),e.closest(".acf-fields").find(".force_redirect_success").show(),location.reload()):(e.closest(".acf-fields").find(".force_redirect_processing").hide(),e.closest(".acf-fields").find(".force_redirect_failure").show(),console.log(i.data))})}function o(){$("#alpha_processing").show();var e={action:"ro_alphabetize_redirects"};$.post(ajaxurl,e,function(e){e.success?($("#alpha_processing").hide(),$("#alpha_success").show(),location.reload()):($("#import_processing").hide(),$("#import_failure").show(),console.log(e.data))})}function c(){if(confirm("WARNING:\nAre you sure you want to DELETE all redirects? This cannot be undone.")){var e={action:"ro_delete_all_redirects"};$.post(ajaxurl,e,function(e){e.success?location.reload():console.log(e.data)})}}$("body").hasClass("red-olive_page_ro-redirects")&&($(".acf-field-56f0665fd1168").find(".acf-button").hide(),$(".redirect-check").find("[type=checkbox]").change(function(e){$(this).is(":checked")&&r($(this))}),$("#ro_redirect_file_import").change(function(i){var r=i,o=$("#ro_redirect_skip_check").is(":checked");e(r,o)}),$("#alphabetize-urls").click(function(e){e.preventDefault(),o()}),$("#delete-all-redirects").click(function(e){e.preventDefault(),c()}))});